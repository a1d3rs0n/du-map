<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <meta http-equiv="X-UA-Compatible" content="ie=edge" />
    <title>DU Map (demo)</title>

    <!-- update the version number as needed -->
    <script defer src="/__/firebase/6.3.4/firebase-app.js"></script>
    <!-- include only the Firebase features as you need -->
    <script defer src="/__/firebase/6.3.4/firebase-storage.js"></script>
    <!-- initialize the SDK after all desired features are loaded -->
    <script defer src="/__/firebase/init.js"></script>

    <!-- FRAME WORKS -->
    <!-- Font -->
    <link rel="font" href="res/font/Pyidaungsu-2.5_Regular.ttf" />

    <!-- import Google Icon Font-->
    <link
      href="https://fonts.googleapis.com/icon?family=Material+Icons"
      rel="stylesheet"
    />
    <!-- import Materialize -->
    <link rel="stylesheet" href="res/css/materialize.css" />
    <!-- Dropdown -->
    <link rel="stylesheet" href="res/css/dropdown.css" />
    <!-- Animate.css -->
    <link rel="stylesheet" href="res/css/animate.css" />

    <!-- MapBox -->
    <script src="https://api.mapbox.com/mapbox-gl-js/v1.2.0/mapbox-gl.js"></script>
    <link
      href="https://api.mapbox.com/mapbox-gl-js/v1.2.0/mapbox-gl.css"
      rel="stylesheet"
    />

    <!-- CUSTOM CSS -->
    <link rel="stylesheet" href="res/css/style.css" />

    <!-- jQuery-->
    <script src="res/js/jquery-3.4.1.js"></script>

    <!-- Vue & Router -->
    <script src="https://unpkg.com/vue/dist/vue.js"></script>
    <script src="https://unpkg.com/vue-router/dist/vue-router.js"></script>
  </head>

  <body>
    <div id="mapDiv">
      <div id="map"></div>
    </div>
    

    <div id="myVue">
      <div style="height: 100vh;" v-if="dataLoaded == false">
        <div 
          class="progress" 
          style="position: fixed; top: 50vh;">
          <div class="indeterminate" style="width: 70%"></div>
        </div>
      </div>
      <v-sidebar></v-sidebar>
      <v-dock></v-dock>
      <transition>
        <router-view></router-view>
      </transition>
    </div>
  </body>

  <!-- Welcome -->
  <script type="text/x-template" id="v-welcome">
    <div>
      <div class="hero">
        <img src="res/img/myLogo.svg" />
        <h1>Hello Map</h1>
        <router-link to="/" class="btn">To Map</router-link>
      </div>
    </div>
  </script>

  <!-- Sidebar -->
  <script type="text/x-template" id="v-sidebar">
    <div style="position: absolute">
        <!-- Sidebar -->
        <ul id="slide-out" class="sidenav">
          <li>
            <div class="user-view user-view-custom">
              <img src="res/img/maps.svg" /> DU Map
            </div>
          </li>

          <li><a class="subheader">Places</a></li>
          <ul class="collapsible main">
            <!-- Sidebar Place Group -->
            <!-- Departments, Other Places, Bus Stops  -->
            <v-placegroup
              v-for="placegroup in placegroups"
              :placegroup="placegroup"
              :key="placegroup.id"
            ></v-placegroup>
          </ul>

          <li class="divider"></li>

          <li><a class="subheader">About</a></li>
          <li>
            <div class="collapsible-header waves-effect">
              <i class="material-icons">info</i> About Us
            </div>
          </li>
        </ul>


        <!-- Searchbar -->
        <div class="searchbar-group animated fadeInUp">
          <div class="searchbar">
            <a
            href="#"
            data-target="slide-out"
            class="btn-sidenav sidenav-trigger btn"
            >
              <i class="material-icons">menu</i>
            </a>
            <input id="searchInput" placeholder="Search" type="text">
          </div>

          <div class="result-group">
            <li
              class="animated fadeInUp fast waves-effect"
              v-for="result in results"
              @click="showPlaceInfo(result)"
              @keyup.enter="showPlaceInfo(result)"
              tabindex="0">
              <i class="material-icons">{{ getMaterialIcon(result.item.properties.type) }}</i>
              {{ result.item.properties.name_en }}
            </li>
          </div>
        </div>
      </div>
  </script>

  <!-- PlaceGroup -->
  <script type="text/x-template" id="v-placegroup">
    <li>
      <div class="collapsible-header waves-effect waves-teal">
        <i class="material-icons">{{ getMaterialIcon }}</i>
        {{ placegroup.name }}
        <div id="dropdown-3" class="dropdown"></div>
      </div>

      <div class="collapsible-body ">
        <ul class="bg-gray">
          <li
            class="adjest waves-effect waves-block sidenav-close"
            v-for="place in placegroup.places"
            @click="showPlaceInfo(place)"
          >
            {{ place.properties.name_en }}
          </li>
        </ul>
      </div>
    </li>
  </script>

  <!-- Dock -->
  <script type="text/x-template" id="v-dock">
    <div
      class="container dock waves-effect"
      :class="{ 'expand-height': isExpanded }"
      :style="{ height: height }"
      @click="routeToPage()">
      <h4 class="place-name">{{ place.properties.name_en }}</h4>
      <h5 class="place-type">{{ place.properties.type }}</h5>
    </div>
  </script>

  <!-- Place Page -->
  <!-- <script type="text/x-template" id="v-place-page">
    <div
      class="place-page"
      :style="{ height: height, position: position }">
      <div class="hero">
        <div class="bg-img" v-if="expanded"></div>
        <h3
          class="hero-text"
          :class="{ textexpand: expanded }">
          {{ properties.name_en }}
        </h3>
      </div>

      <div class="container">
        <h5 style="color: gray;">{{ properties.type }}</h5>
        <a @click="toggle()" replace class="btn">Toggle</a>

        <div class="carousel">
          <a
            class="carousel-item">
            <img src="res/img/d-cs/bg.png">
          </a>
          <a
            class="carousel-item">
            <img src="res/img/d-cs/img1.png">
          </a>
          <a
            class="carousel-item">
            <img src="res/img/d-cs/img2.jpg">
          </a>
          <a
            class="carousel-item">
            <img src="res/img/d-cs/img3.jpg">
          </a>
        </div>
      </div>
    </div>
  </script> -->

  <script type="text/x-template" id="v-place-page">
    <div class="row place-page">
      <div class="col m6"></div>
      <div class="col s12 m6" style="padding: 0;">
        <ul 
          class="collapsible dock-collapsible" 
          style="margin: 0;">
          <li>
            <div 
              class="collapsible-header dock-header"
              @click="toggle()">
              <i class="material-icons">{{ getMaterialIcon(properties.type) }}</i>{{ properties.name_en }}
            </div>
            <div 
              class="collapsible-body p0">
              <div class="dock-body">
                <ul class="collection dock-collection">
                  <li class="collection-item dock-item">
                    <i class="material-icons">
                      perm_identity
                    </i>
                    {{ properties.id }}
                  </li>
                  <li class="collection-item dock-item">
                    <i class="material-icons">
                      phone
                    </i>
                    09 404 770 584
                  </li>
                  <li class="collection-item dock-item">
                    <i class="material-icons">
                      access_time
                    </i>
                    9:00 - 13:00
                  </li>
                  <li class="collection-item dock-item">
                    <i class="material-icons">
                      location_on
                    </i>
                    {{ coordinates[0] }},{{ coordinates[1] }}
                  </li>
                </ul>
                <div class="collapsible dock-collapsible">
                  <li>
                    <div 
                      @click="initMaterialbox()"
                      class="collapsible-header dock-header">
                      <i class="material-icons">
                        image
                      </i>
                      Images
                    </div>
                    <div class="collapsible-body dock-body">
                      <div class="img-group">
                        <div class="img-item" v-for="imgSrc in imgSrcs" >
                          <img
                            class="materialboxed"
                            :src="imgSrc">
                        </div>
                      </div>
                    </div>
                  </li>
                </div>
              </div>
            </div>
          </li>
        </ul>
      </div>
    </div>
  </script>

  <script defer src="res/js/firebase.js"></script>

  <!-- JSs  -->
  <!-- String Literials -->
  <script src="res/js/constants.js"></script>

  <!-- GeoJson Data  -->
  <script src="res/js/du-places.js"></script>

  <!-- JS for dropdown animation -->
  <script type="text/javascript" src="res/js/dropdown.js"></script>

  <!-- Fuse.js -->
  <script src="res/js/fuse.js"></script>

  <!-- Materialize JS -->
  <script type="text/javascript" src="res/js/materialize.js"></script>

  <!-- Custom Mapbox JS -->
  <script src="res/js/mapbox.js"></script>

  <!-- Vue -->
  <script src="res/js/myVue.js"></script>
</html>
